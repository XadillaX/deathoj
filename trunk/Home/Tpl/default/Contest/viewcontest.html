<php>
function get_contest_status($starttime, $endtime)
{
    $current_time = time();
    $results = array(
        "<span style='color: gray;'>未开始</span>",
        "<span style='color: red;'>进行中</span>",
        "<span style='color: green;'>已结束</span>"
    );

    if($current_time < $starttime) return $results[0];
    if($current_time > $starttime && $current_time < $endtime) return $results[1];
    return $results[2];
}
</php>
<include file="Public:header" />
<link rel="stylesheet" type="text/css" href="__ROOT__/default/css/problem.css" media="screen" />

<script type="text/javascript">
$(function(){
    $(".titles").click(function(){
        $(this).next().slideToggle("normal");
    });
});
</script>

<div id="prob-list-wrapper">
    <ul id="prob-info-ul">
        <li id="title"><h3>{$info["title"]}</h3></li>

        <li class="titles" id="contesttime-title">比赛时间</li>
        <li class="contents" id="contesttime">
            <div>
                <span style="color: #ff0099;">{:date("Y-m-d H:i:s", $info["starttime"])}</span> -
                <span style="color: #ff7800;">{:date("Y-m-d H:i:s", $info["endtime"])}</span>
                [{:get_contest_status($info["starttime"], $info["endtime"])}]
            </div>
        </li>

        <li class="titles" id="currenttime-title">服务器时间</li>
        <li class="contents" id="currenttime">
            <div>
                {:date("Y-m-d H:i:s", time())}
            </div>
        </li>

        <li class="titles" id="problemlist-title">题目列表</li>
        <li class="contents" id="problemlist">
            <div>
                <table>
                    <thead>
                    <tr>
                        <th style="text-align: center;" width="50">解决</th>
                        <th style="text-align: center;" width="150">索引</th>
                        <th style="text-align: center;">标题</th>
                    </tr>
                    </thead>

                    <tbody>
                    <foreach name="prob_list" item="list">
                        <tr>
                            <td style="text-align: center;" class="br"></td>
                            <td style="text-align: center;" class="br">{$list.index}</td>
                            <td><a href="{:U('Contest/view?id=' . $list['contestid'] . '&problem=' . $list['index'])}">{$list.title}</td>
                        </tr>
                    </foreach>
                    </tbody>
                </table>
            </div>
        </li>
    </ul>
</div>

<include file="Pulibc:footer" />